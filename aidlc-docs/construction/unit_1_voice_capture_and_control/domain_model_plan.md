# Unit 1: 音声キャプチャ・操作制御 — ドメインモデル計画

## 対象ユーザーストーリー

- US-001: 音声認識の開始と停止（プッシュトゥトーク方式）
- US-008: アプリのメニューバー常駐
- US-009: グローバルショートカットキー

---

## ドメインモデリングステップ

- [x] **ステップ 1**: ユーザーストーリー（US-001, US-008, US-009）の分析と、ドメインコンポーネント候補の洗い出し
  - 各ユーザーストーリーの受け入れ基準から、必要なエンティティ、値オブジェクト、ドメインイベント、ドメインサービスを特定する

- [x] **ステップ 2**: 音声キャプチャセッション（VoiceCaptureSession）のドメインモデル定義
  - US-001 に対応する、音声キャプチャの開始・停止・録音状態管理に関するコンポーネントの属性、振る舞い、状態遷移を定義する
  - 出力ファイル: `aidlc-docs/construction/unit_1_voice_capture_and_control/docs/voice_capture_session.md`

[Question] US-001 の受け入れ基準に「録音中であることがUI上で明確に区別できる」とありますが、録音状態（Recording / Idle など）をドメインモデルの一部としてモデリングすべきでしょうか？それとも、これは純粋にUIの関心事として扱い、ドメインモデルからは除外すべきでしょうか？
[Answer]
録音状態をドメインモデルの一部としてモデリングすべきです。 

- [x] **ステップ 3**: ショートカット設定（ShortcutConfiguration）のドメインモデル定義
  - US-009 に対応する、グローバルショートカットキーの設定・管理に関するコンポーネントの属性と振る舞いを定義する
  - 出力ファイル: `aidlc-docs/construction/unit_1_voice_capture_and_control/docs/shortcut_configuration.md`

[Question] US-009 の受け入れ基準に「設定画面でグローバルショートカットキーを設定できる」とありますが、ショートカットキーの設定はどの粒度でモデリングすべきでしょうか？たとえば、修飾キー（Cmd, Ctrl, Option, Shift）と主キーの組み合わせとして定義すべきか、単一の文字列として扱うべきか、ご意見をお聞かせください。
[Answer]
単一の文字列として扱うべきだと思っています。具体的には、function key を押したら、すぐに音声入力を開始できるみたいな感じにしています。 

- [x] **ステップ 4**: アプリケーションライフサイクル（ApplicationLifecycle）のドメインモデル定義
  - US-008 に対応する、メニューバー常駐・バックグラウンド動作に関するコンポーネントの属性と振る舞いを定義する
  - 出力ファイル: `aidlc-docs/construction/unit_1_voice_capture_and_control/docs/application_lifecycle.md`

[Question] US-008 の「メニューバーアイコンをクリックすると音声認識の開始/停止ができる」という要件は、US-001 のプッシュトゥトーク（押し続ける方式）とは異なる操作方法（クリックによるトグル方式）に見えます。これは以下のどちらの解釈が正しいですか？
  - (a) メニューバーアイコンのクリックもプッシュトゥトーク（押し続けで録音、離すと停止）として動作する
  - (b) メニューバーアイコンのクリックはトグル方式（1回クリックで開始、もう1回クリックで停止）として動作する
[Answer]
(a) メニューバーアイコンのクリックもプッシュトゥトーク（押し続けで録音、離すと停止）として動作する
こっちですね。 

- [x] **ステップ 5**: Unit 1 コンポーネント間の相互作用と、Unit 2（音声認識エンジン）への境界インターフェースの定義
  - コンテキストマップに基づき、Unit 1 から Unit 2 へ供給する音声データストリームと制御信号のインターフェースを定義する
  - Unit 1 から Unit 3 へ供給するアクティブウィンドウ情報のインターフェースを定義する
  - 出力ファイル: `aidlc-docs/construction/unit_1_voice_capture_and_control/docs/component_interactions.md`

- [x] **ステップ 6**: Unit 1 ドメインモデル全体のレビューと最終確認
  - 全ドキュメントの一貫性を確認し、ユーザーストーリーの受け入れ基準がすべてカバーされていることを検証する
